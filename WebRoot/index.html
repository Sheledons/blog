<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>mainPage</title>
	<script src="lib/js/jquery-3.4.1.js"></script>
	<style type="text/css">
		div{
			vertical-align: top;
		}
		.leftList{
			display: inline-block;
		    margin-left: 350px;
		    margin-right: 100px;
		    width: 400px;
		}
		.headImage{
			display: block;
			border-radius: 50%;
			border: 1px solid blue;
			margin-right: auto;
			margin-left: auto;
			width: 150px;
			height: 150px;
		}
		.name{
			text-align: center;
			color: #C0C0C0;
			font-size: 25px;
			font-weight: bold;
		}
		.summaryNumber>div{
			display: inline-block;
			margin-left: 75px;
			color:#4682B4;
		}
		.summaryName a{
			background-color: 	#FFFFFF;
			text-decoration: none;
			color:#4682B4;
			text-align: center;
			margin-left: 110px;
		}
		.summaryName>div{
			margin-top: 10px;
			padding-left: 5px;
			padding-bottom: 5px;
			padding-right: 5px;
			padding-top: 5px;
			background-color:#F5F5F5;
			width: 250px;
		}
		.title{
			text-align: center;
			color: white;
			background-color:#4682B4;
			padding-top:  15px;
			padding-bottom: 15px;
			padding-left: 30px;
			padding-right: 30px;
			margin-top: 50px;
		}
		.bottomClassify,.bottomRead{
			text-align: center;
			width: 260px;
		}
		.content{
			background-color:#F5F5F5;
			display: inline-block;
			text-align: center;
			padding-top:  15px;
			padding-bottom: 15px;
			padding-left: 30px;
			padding-right: 30px;
			color: black;
			width: 200px;
			border: 2px ;
		}
		.label>span{
			color: #1E90FF;
			text-align: center;
			margin-left: 10px;
			margin-top: 10px;
		}
	</style>
	<style type="text/css">
		.rightList{
			width: 600px;
/*			height: 500px;*/
/*			border: 2px red solid;*/
			margin-top: 20px;
			margin-right:350px;
			display: inline-block;
			background-color: white;
		}
		.rightTitle{
			background-color: #1E90FF;
			text-align: center;
			width: 600px;
			height: 40px;
			padding-top: 25px;
			color: white;
		}
		.articleTitle{
			width: 600px;
			color: #1E90FF;
			font-size: 25px;

		}
		.rightContent>div{
			height: 42.5px;
			text-align: center;
			width: 598px;
	/*		border: blue 2px solid;*/
			padding-top: 20px;
		}
		.rightList a{
			color:  #1E90FF;
			text-decoration: none;
		}
		.rightContent{
            border-bottom: #DCDCDC 2px solid;
        }
        .pageNum{
			background-color: #DCDCDC;
/*			border: 2px #4682B4 solid;*/
			font-size: 30px;
		}
		.pageNum>a{
			margin-top: 20px;
			margin-right: 10px;
			background-color: #4682B4;
			display: inline-block;
			width: 30px;
			text-align: center;
			border: 2px solid #4682B4;
			text-decoration: none;
		}
		.signOut{
			text-decoration: none;
			color: #4682B4;
		}
	</style>
</head>
<body style="background-color:#DCDCDC">
	<div class="leftList">
		<div>
			<h3 style="color:#4682B4;text-align: center;margin-bottom: 5px">Change World</h3>
			<h5 style="text-align: center;color:#C0C0C0">è½æ—¥å½’å±±æµ·ï¼Œé™ªä¼´æˆå‘Šç™½</h5>
			<img src="" class="headImage">
			<div class="name">
				Sheledon
			</div>
			<script type="text/javascript">
				$.get("userInfoServlet",{},function(info){
					if(info.flag==false){
						location.href="login.html";
					}else{
						$(".name").html(info.data.name);
						$(".headImage").attr("src",info.data.imageUrl);
					}
				})
			</script>
			<div class="summaryNumber">
				<div>
					<div id="anumber" style="text-align: center;"></div>
					<div >æ—¥å¿—</div>
					<script type="text/javascript">
						$.get("articleNumberServlet",function(number){
							$("#anumber").html(number);
							var pageNum=number%4==0?number/4:parseInt(number/4+1);
							var base="";
							for(var i=0;i<pageNum;i++){
								base+="<a href='javascript:;' id='button'>"+(i+1)+"</a>";
							}
							$(".pageNum").html(base);
						})
					</script>
				</div>
				<div>
					<div style="text-align: center;" id="cnumber">0</div>
					<div >åˆ†ç±»</div>
					<script type="text/javascript">
						$.get("cnumberServlet",function(info){
							$("#cnumber").html(info);
						})
					</script>
				</div>
				<div>
					<div style="text-align: center;">ğŸ˜´</div>
					<div><a href="javascript:;" class="signOut">é€€å‡ºè´¦å·</a></div>
					<script type="text/javascript">
						$(".signOut").click(function(){
							$.get("signOutServlet",function(){
								window.location="login.html";
							})
						})
					</script>
				</div>
				<div class="summaryName">
					<div><a href="index.html">é¦–é¡µ</a></div>
					<div><a href="classifyPage.html">åˆ†ç±»</a></div>
					<div><a href="createArticle.html" style="margin-left:94px">æ·»åŠ æ–‡ç« </a></div>
					<div><a href="manage.html" style="margin-left:94px">æ–‡ç« ç®¡ç†</a></div>
					<div><a href="aboutme.html" style="margin-left:94px">å…³äºåšä¸»</a></div>
				</div>
				<div class="bottomClassify">
					<script type="text/javascript">
						$.get("cdetailServlet",function(info){
							var base="<div class='title'>åˆ†ç±»</div>";
							if(info==null){
								base+='<div class="content"><span>æ‚¨æœ¨æœ‰åˆ†ç±»ï¼</span></div>';
							}else{
								for(var i=0;i<info.length;i++){
									base+='<div class="content"><span>'+info[i].cname+'</span>';
									base+='<span class="number" style="padding-left: 15px">'+info[i].cnumber+'</span></div>';
									if(i==3){
										break;
									}
								}
							}
							$(".bottomClassify").html(base);
						})
					</script>
				</div>
				<div class="bottomRead">
					<script type="text/javascript">
						$.get("articleByTimesServlet",function(info){
							if(info.flag==false){
								$("bottom").html("<div class='title'>é˜…è¯»æ’è¡Œ</div>"+"<div class='content'>æ‚¨è¿˜æœ¨æœ‰æ–‡ç« å“¦ï¼</div>");
							}else{
								//æ·»åŠ æ–‡ç« å†…å®¹
								var artList=info.data;
								var html="<div class='title'>é˜…è¯»æ’è¡Œ</div>";
								for(var i=0;i<artList.length;i++){
									html+="<div class='content'>"+"<span>"+artList[i].aname+"</span><span class='number' style='padding-left:15px'>("+artList[i].viewTimes+")</span></div>"
									if(i==2){
										break;//æœ€å¤šæ˜¾ç¤ºä¸‰æ¡
									}
								}
								$(".bottomRead").html(html);
							}
						})
					</script>
				</div>
				<div class="bottom">
					<div class="title" style="margin-bottom: 20px">æ ‡ç­¾</div>
					<div class="label" style="text-size:5px">
						<span>java</span>
						<span>html</span>
						<span>servlet</span>
						<span>javaScript</span>
					</div>
					<script type="text/javascript">
						var labelChildren=document.querySelector(".label").children;
						var color=["#00FFFF","#00FF7F"];
						var index=1;
						console.log(labelChildren);
						for(var i=0;i<labelChildren.length;i++){
							labelChildren[i].style.background=color[index%2];
							index++;
						}
					</script>
				</div>
			</div>
		</div>
	</div>

	<!--å³-->
	<div class="rightList">
		<div class="right"></div>
		<div class="pageNum"></div>
	<script type="text/javascript">
		var showA=function(info){
			var base='<div class="rightTitle">æ–‡ç« </div>';
			if(info==null){
				base+="<div class='rightContent'><div class='articleTitle'>æ‚¨è¿˜æœ¨æœ‰æ–‡ç« å“¦ï¼</div></div>";
				base+="<div><a href='#' style='text-decoration:none;color:#1E90FF;'>ç‚¹å‡»æ­¤å¤„æ·»åŠ æ–‡ç« <div>"
			}else{
				for(var i=0;i<info.length;i++){
					base+='<div class="rightContent" id='+info[i].aid+'><div class="articleTitle">'+info[i].aname+'</div>'
					base+='<div class="rightSummary"><span>'+info[i].time+'&nbsp;&nbsp|&nbsp;&nbsp</span>';
					base+='<span>'+info[i].cname+"&nbsp;&nbsp|&nbsp;&nbsp</span>";
					base+="<span>é˜…è¯»æ¬¡æ•°:"+info[i].viewTimes+"</span></div>";
					// base+="<div><p>"+info[i].content.substring(0,)+"</p></div>";
					base+="<div><a class='read' href='javascript:;' data-id="+info[i].aid+">é˜…è¯»å…¨æ–‡</a></div></div>"
					//é˜…è¯»å…¨æ–‡ï¼Œä»¥getæ–¹å¼å‘é€è¯·æ±‚ï¼Œå‚æ•°ä¸ºaid
				}	
			}
			$(".right").html(base);
		}
	</script>
	<script type="text/javascript">
		$(".pageNum").on("click","#button",function(){
			console.log("button ");
				for(var i=0;i<$(".pageNum").children().length;i++){
			//		console.log($(".pageNum").children()[0]);
			       $(".pageNum").children()[i].style.backgroundColor="#4682B4";
				}
				this.style.backgroundColor="white";		
				$.get("articleByCreateServlet",{locpage:this.innerHTML},function(info){
				    showA(info);		 					
				})					
		})
	</script>

	<script type="text/javascript">
		$.get("articleByCreateServlet",{locpage:1},function(info){
		 		showA(info);
			})	
	</script>
	<script type="text/javascript">
		window.onload=function(){
	    $(".right").on("click",".read",function(){
			$.get("readArticleServlet",{aid:this.getAttribute("data-id")},function(info){
				location.href=info;
			})
		})		
		}
	</script>
</body>
</html>
